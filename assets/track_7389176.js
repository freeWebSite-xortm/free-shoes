!function(root){function log(e){function t(){return location.protocol+"//"+i.service[i.mode]}function a(e){var t=new Image,a=2,r="log_"+(new Date).getTime();t.onload=t.onerror=t.onabort=function(n){"load"!==n.type&&a--?setTimeout(function(){t.src=e+"&n="+r},1e3):t=null},t.src=e}function r(e,t){var a=e||{};for(var r in t)a.hasOwnProperty(r)||(a[r]=t[r]);return a}function n(e){var a=[];for(var r in e){var n=e[r];"object"==typeof n&&(n=JSON.stringify(n));var i=r+"="+encodeURIComponent(n);a.push(i)}var o=t()+a.join("&");
return o}var i={mode:"product",service:{develop:"cq01-dr-ems08.cq01.baidu.com:8085/nclick-imlp/index?",product:"ada.baidu.com/nclick-imlp/index?"}},o={tag:"",imlp_id:"",app_id:"",type:"",content:"",sessionid:"",from:"",im_type:"",params:"",pvKey:"",xst:"",timestamp:0,abTest:"",ucid:"",ext:""};e.timestamp=Date.now();var s=r(e,o);a(n(s))}function Base64(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}function getWsid(){try{if(!sessionStorage||!sessionStorage.getItem)return"";
if(sessionStorage.getItem("wsid"))return sessionStorage.getItem("wsid");for(var e="",t=["0","1","2","3","4","a","f","g","h","i","j","o","p","v","w","z"],a=0;32>a;a++){var r=Math.round(Math.random()*(t.length-1));e+=t[r]}return sessionStorage.setItem("wsid",e),e}catch(n){return""}}function handleVisibilityChange(e){"visible"===e?(fetchDataObj&&fetchDataObj.start&&fetchDataObj.start(),entrySiteObj&&entrySiteObj.entry&&entrySiteObj.entry()):"hidden"===e&&fetchDataObj&&fetchDataObj.stop&&fetchDataObj.stop()
}function bindCloseBtnEvent(){var e=document.querySelector(".track-hide");e.addEventListener("click",function(){destoryImlpPopup()})}function destoryImlpPopup(){imlpIframeInstance.destory&&imlpIframeInstance.destory(),imlpIframeInstance=null,document.body.classList.add("layout-loading"),postMessage({type:"imlp-popup-close",data:{}})}function popupImlp(e){if(!imlpIframeInstance&&e&&e.url)imlpIframeInstance=new ProxySingleImlpIframe(e);else if(imlpIframeInstance){var t=imlpIframeInstance.getIframe&&imlpIframeInstance.getIframe(),a=t&&t.contentWindow;
imlpIframeInstance.postMessageToPage(a,{type:"imlp-popup-open"})}}function stopHeartBeat(){fetchDataObj&&fetchDataObj.stop&&fetchDataObj.stop()}function entrySite(e){function t(e){for(var t=0;t<userList.length;t++)if(userList[t]===e)return;userList.push(e)}if(!isEntry||e.isAppendIM){var a=e.referrer;saveFromImlpUrl(a,e.url);{var r=readCData(a);e.openType}if(!r){var n=loadLocalData()||{};n&&n.openImUrl&&n.openImUrl.data&&(r=readCData(n.openImUrl.data))}var i=null,o=!1;if(r)o=r.ssid,imlpSdk.setSsid(r.ssid),imlpSdk.setImType(r.imType),i={url:e.url,xst:e.xst,pagetitle:e.pagetitle,imData:{im:{imParam:{appid:r.appid,ucid:r.ucid,channel:r.channel,im_type:r.imType,level1:r.level1,level2:r.level2,level3:r.level3}}}},postMessage({type:"event",data:{eventName:"error",data:{type:"entrySite",errorType:"rebound",data:e.imData||{}}}});
else{if(!e.imData)return;i=e,postMessage({type:"event",data:{eventName:"entrySiteSuccess",data:e.imData||{}}})}i.source=pageQuery.sdkReferrer||"",i.wsid=wsid,i.pvkey=i.pvkey||pageKey,e.tradeid&&(i.tradeid=e.tradeid),isEntry=!0;var n=loadLocalData()||{},s="",c=!1,d={};if(i&&i.imData){var l=i.xst||pageQuery.serverXST;for(var u in i.imData){var p=i.imData[u]||{},f=p.imParam;if(f&&f.ucid){t(f.ucid);var h=getXstKey(f.ucid),m=n[h];r||d[h]||m&&m.data===l||(saveParamData(h,l),d[h]=!0,c=!0),s||(s=m)}f&&f.appid&&appidlist.push(f.appid)
}}if(c&&sendParamData(),s&&!i.xst&&(i.xst=s.data),o||(entrySiteObj=new EntrySite(i,baseApi,callbackmodel,{source:"cip"}),entrySiteObj.entry()),fetchDataObj)return void fetchDataObj.addOrReplaceApi("fetch",createFetchUrl());fetchDataObj=new FetchData(imlpSdk,baseApi,callbackmodel,{wsid:wsid,pvKey:window.pageKey||"",fetchDelay:1e4,timeoutDelay:2e4,formatParamsFn:function(t){return t=t||{},t.main&&delete t.main.noHeartBeat,t.invite=!0,e&&e.imData&&(t.invite=!(0===parseInt(e.imData.inviteSwitch,10))),t.talk?(t.talk.action="preview",t):t
}}),fetchDataObj.addOrReplaceApi("fetch",createFetchUrl()),fetchDataObj.start()}}function createFetchUrl(){var e=encodeURIComponent(userList.join(",")),t=encodeURIComponent(appidlist.join(",")),a=baseApi.fetch+"?userid="+e+"&appid="+t+"&wsid="+wsid+"&pvKey="+window.pageKey;return a}function getXstKey(e){var t=["xst_",e];return t.join("")}function readCData(e){var t=isImlpUrl(e,domain);if(t){var a=parseUrl(e),r=a.params,n=r.cdata;try{var i=new Base64;n=i.decode(n);var o=n.split("__")||[],s={channel:o[0]||"",level1:o[1]||"",level2:o[2]||"",level3:o[3]||"",ucid:o[4]||"",imType:o[5]||"",ssid:o[6]||"",appid:o[7]||"",terminal:o[8]||""};
return s}catch(c){}}}function sendParamData(){var e=loadLocalData();e=formatParamData(e)||{},e&&postMessage({type:"param_data",data:e})}function formatParamData(e){if(e||(e={}),e.openImUrl){var t=e.openImUrl.data,a=readCData(t);e.cdata=a;var r=parseUrl(t);r.removeParam("cdata"),r.addParam("rebound","1"),r.addParam("storage",storage),e.openImUrl.data=r.url}return serverBaiduid&&(e.baiduid=serverBaiduid),e}function loadLocalData(){var e=getData(paramdatakey,!0);if(e){var t=(new Date).getTime(),a=!1;
for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if("object"==typeof n){var i=n.timestamp||0;t-i>datatimeout&&(a=!0,delete e[r])}else delete e[r],a=!0}return a&&saveData(paramdatakey,e),e}}function saveParamData(e,t,a){if(e&&t){var r=a||(new Date).getTime(),n=getData(paramdatakey,!0)||{};if(!(n[e]&&n[e].timestamp>r)){var i={data:t,timestamp:r};return n[e]=i,saveData(paramdatakey,n)}}}function removeParamData(e){if(e){var t=loadLocalData()||{},a=!1;eachArray(e,function(e){t[e]&&(delete t[e],a=!0)
}),a&&saveData(paramdatakey,t)}}function saveTrackData(e){if(e&&e.trackData){var t=(new Date).getTime(),a=getData(trackkey,!0);a&&t-datatimeout>(a.timestamp||0)&&(a=null),a&&a.data&&!e.isFullTrack||(a={timestamp:t,data:[]}),e.trackData instanceof Array?a.data.push.apply(a.data,e.trackData):a.data.push(e.trackData);var r=saveData(trackkey,a);postMessage(r?{type:"save_track_success",data:{id:e.id}}:{type:"save_track_error",data:{id:e.id}})}}function saveData(e,t){try{var a=t;"object"==typeof t&&(a=JSON.stringify(t)),useLocalStorage?localStorage.setItem(e,a):sessionStorage.setItem(e,a)
}catch(r){return!1}return!0}function getData(e,t){var a=null;try{a=useLocalStorage?localStorage.getItem(e):sessionStorage.getItem(e),t&&(a=JSON.parse(a))}catch(r){a=null}return a}function saveFromImlpUrl(e,t){var a="openImUrl";if(e&&!isChargeLink(e)&&isSameDomain(e,t)||removeParamData(["openImUrl"]),isImlpUrl(e,domain)){if(-1===e.indexOf("cdata="))return void removeParamData(["openImUrl"]);saveParamData(a,e)}sendParamData()}function isChargeLink(e){return-1!==e.indexOf("baidu.php?url=")||-1!==e.indexOf("link?url=")||-1!==e.indexOf("baidu.php?sc.")||-1!==e.indexOf("adrc.php")?!0:!1
}function isImlpUrl(e,t){for(var a=new RegExp("^https?://"+t+"/imlp","i"),r=new RegExp("^https?://"+t+"/site/[^/]+/.*","i"),n=new RegExp("^https?://"+t+"/imsdk/page","i"),i=[a,r,n],o=!1,s=0;s<i.length;s++)o=o||i[s].test(e);return o}function getBrowser(e){var t=e.indexOf("Android")>-1||e.indexOf("Linux")>-1,a=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),r=null;t?r="android":a&&(r="ios");var n=null;return/(SogouMobileBrowser|SogouMSE)/i.test(e)&&(n="sogou"),{os:r,browser:n}}function parseUrl(e){function t(e){function t(){var e=n,t=this.params;
if(t){e+="?";var a=[];for(var r in t){var i=t[r];if(null!==i&&void 0!==i){var o=typeof i;if("string"!==o&&"number"!==o)try{i=JSON.stringify(i)}catch(s){continue}a.push(r+"="+encodeURIComponent(i))}}e+=a.join("&")}return e}var a={};e=e||"";for(var r=e.split("?"),n=r[0],i=r[1]||"",o=i.split("&"),s=0;s<o.length;s++){var c=o[s];if(c){var d=c.split("="),l=d[0],u=d[1]||"";try{u=decodeURIComponent(u)}catch(p){u=d[1]||""}a[l]=u}}var f=n.replace(/\?.*/,"").replace(/^(https?:)?\/\//i,"").replace(/\/.*/,""),h=f.replace(/:\d+$/,"");
this.params=a,this.url=e,this.removeParam=function(e){delete this.params[e],this.url=t.call(this)},this.addParam=function(e,a){this.params[e]=a,this.url=t.call(this)},this.getHost=function(){return f},this.getHostname=function(){return h}}return new t(e)}function FetchData(e,t,a,r){function n(){if(e){var t=e.getImData()||{},a=t.visitParam||{},r=a.aduserid||"",n=a.appid||"";return{aduserid:r,appid:n}}}function i(t){var a={main:{wsid:p}};if(e&&e.getSsid()){var r=e.getChatCookie&&e.getChatCookie()||"",n=e.getChatCookieKey&&e.getChatCookieKey()||"",i=e.getChatCookieKeyPrefix&&e.getChatCookieKeyPrefix(),o=n.indexOf(i)>-1?r.split&&r.split("_")[1]:void 0,s=e.isConnected&&e.isConnected()?1:0;
a.talk={ssid:e.getSsid()},a.talk.im_type=s?e.getImType()||0:o||e.getImType(),a.talk.connected=s}return t&&(a.main.noHeartBeat=1),a}function o(){return _?!1:(_=!0,d(),s(!0),H=window.setInterval(s,1e3),!0)}function s(e){if(D++,E++,e||1e3*E>v){E=0,v=m;var t=!0;D>15&&(D=0,t=!1);var a=i(t);"function"==typeof y&&(a=y(a)),A.request(g,a)}}function c(){v=h,E=0}function d(){window.clearInterval(H),_=!1}function l(e){"number"==typeof e.fetchDelay&&(h=e.fetchDelay)}function u(e,t){A.addOrReplaceApi(e,t)}r=r||{};
var p=r.wsid||"",f=r.pvKey||r.pvkey||"",h=r.fetchDelay||1e3,m=r.timeoutDelay||15e3,v=h,y=r.formatParamsFn,g="fetch",b=n(),w={};a&&a.getCallback&&(w=a.getCallback(g)||{});var S={};S[g]={onResult:function(e){w.onResult&&w.onResult(e),c()},onError:function(){c()},onEnd:function(){c()}};var k={},C=encodeURIComponent(b.aduserid),R=encodeURIComponent(b.appid);k[g]=t[g]+"?userid="+C+"&appid="+R+"&wsid="+p+"&pvKey="+f;var I=new Callback(this,S),A=new AjaxRequest(null,k,I),H=0,E=0,_=!1,D=0;this.addOrReplaceApi=u,this.start=o,this.stop=d,this.updateParams=l
}function CookieModel(){this.get=function(e){try{for(var t=document.cookie,a=t.split(";"),r=0;r<a.length;r++){var n=a[r];if(-1!==n.indexOf(e+"=")){var i=n.split("=")[1]||"";return i=i.trim()}}}catch(o){}},this.save=function(e,t,a){try{var r=new Date;r.setTime(r.getTime()+1e3*a),document.cookie=e+"="+encodeURIComponent(t)+";path=/ ; expires="+r.toGMTString()}catch(n){}}}function EntrySite(e,t,a,r){function n(e,t){if(!e||!t)return"";try{var a=t[y("0x0")](0,16),r=t[y("0x0")](16,32);a=CryptoJS[y("0x1")][y("0x2")][y("0x3")](a),r=CryptoJS[y("0x1")][y("0x2")][y("0x3")](r);
var n=CryptoJS[y("0x4")][y("0x5")](e,a,{iv:r,mode:CryptoJS[y("0x6")][y("0x7")],padding:CryptoJS[y("0x8")][y("0x9")]});return n[y("0xa")]()}catch(i){return""}}function i(){m.onError&&m.onError(),m.onEnd&&m.onEnd()}function o(){D.request(h,w)}function s(){}function c(e){var t=window.screen.availWidth,a=window.screen.availHeight,r=e.imData,i={},o=[],s=[],c=e.xst,d=e&&e.tradeid;!imlpFp&&e.pvkey&&(imlpFp=n(getFp(),e.pvkey));var u={client:{source:e.source,url:e.url,dpi:t+"x"+a,xst:c,pagetitle:e.pagetitle,pvkey:e.pvkey,wsid:e.wsid,manualInviteEnabled:!(0===parseInt(r.inviteSwitch,10)),ipv6:""},service:[],f:imlpFp||""};
for(var p in r){var h=r[p]||{},m=h.imParam,v=h.options;if(v&&v.pageId&&(u.client.pageid=v.pageId),m){var y=m.ucid,g=m.appid;y&&!i[y]&&(i[y]=1,o.push(y)),g&&!i[g]&&(i[g]=1,s.push(g));var b=m.imid;if(!b&&m.imUrl){var w=l(m.imUrl);b=w.params.imid}u.service.push({appid:m.appid,tradeid:d,ucid:y,channel:m.channel,im_type:m.im_type,level1:m.level1,level2:m.level2,level3:m.level3,imid:b||""}),m.smartInvite&&(u.client.smartInvite={inviteText:"已向该访客发起智能邀请，您仍可主动对其发起邀请。",inviteType:"smart",inviteSource:f})}}return{userIdList:o,appIdList:s,entryData:u}
}function d(e,t,a){var r=new CookieModel,n=r.get(e)||"";n||r.save(e,t,a||31536e3)}function l(e){function t(e){function t(){var e=n,t=this.params;if(t){e+="?";var a=[];for(var r in t){var i=t[r];if(null!==i&&void 0!==i){var o=typeof i;if("string"!==o&&"number"!==o)try{i=JSON.stringify(i)}catch(s){continue}a.push(r+"="+encodeURIComponent(i))}}e+=a.join("&")}return e}var a={};e=e||"";for(var r=e.split("?"),n=r[0],i=r[1]||"",o=i.split("&"),s=0;s<o.length;s++){var c=o[s];if(c){var d=c.split("="),l=d[0],u=d[1]||"";
try{u=decodeURIComponent(u)}catch(p){u=d[1]||""}a[l]=u}}var f=n.replace(/\?.*/,"").replace(/^(https?:)?\/\//i,"").replace(/\/.*/,""),h=f.replace(/:\d+$/,"");this.params=a,this.url=e,this.removeParam=function(e){delete this.params[e],this.url=t.call(this)},this.addParam=function(e,a){this.params[e]=a,this.url=t.call(this)},this.getHost=function(){return f},this.getHostname=function(){return h}}return new t(e)}d("iuid_dz",(new Date).getTime()),r=r||{};var u=r.retryDelay||5e3,p=r.retryCount||3,f=r.source||"",h="entrySite",m={};
a&&a.getCallback&&(m=a.getCallback(h)||{});var v=["slice","enc","Utf8","parse","AES","encrypt","mode","CBC","pad","Pkcs7","toString"];!function(e,t){var a=function(t){for(;--t;)e.push(e.shift())};a(++t)}(v,330);var y=function(e){e-=0;var t=v[e];return t},g={entrySite:{onResult:function(e){if(0===e.status)e.iuid&&d("iuid",e.iuid),m.onResult&&m.onResult(e),m.onEnd&&m.onEnd();else{var t=T();t||i()}},onError:function(){var e=T();e||i()},onEnd:function(){}}},b=c(e)||{},w=b.entryData,S=(b.userIdList||[]).join(","),k=(b.appIdList||[]).join(","),C={},R=encodeURIComponent(S),I=encodeURIComponent(k),A=e.pvkey,H=e.wsid,E=e&&e.tradeid;
C[h]=t[h]+"?userid="+R+"&appid="+I+"&pvkey="+A+"&wsid="+H,E&&(C[h]=C[h]+"&tradeid="+E);var _=new Callback(this,g),D=new AjaxRequest(null,C,_),T=function(){function e(){return-1!==a&&t>=a?!1:(window.clearTimeout(r),r=window.setTimeout(function(){t++,D.request(h,w)},u),!0)}var t=0,a=p,r=0;return e}();this.entry=o,this.onSuccess=s}function postMessage(e){e.from="track_page",e.validate="",e.trackVersion=trackVersion,e.data&&"object"==typeof e.data&&(e.data.trackVersion=trackVersion);try{root.parent.postMessage(e,"*")
}catch(t){return!1}return!0}function isImlp(e){var t=!1;try{var a=e.location.href;t=isImlpUrl(a,domain)}catch(r){}return t}function getDomain(e){var t=e||location.href,a=parseUrl(t);return a.getHost()}function getTrackParam(e){var t=parseUrl(location.href),a=t.params;return a[e]||""}function isSameDomain(e,t){return e&&t&&getDomain(e)===getDomain(t)?!0:!1}function eachArray(e,t){if(e&&"function"==typeof t)for(var a=0;a<e.length;a++)t(e[a],a)}function newcomerUnread(e){for(var t={unread:[],ids:[]},a=0;a<e.length;a++){var r=JSON.parse(e[a])||{};
message[r.message_id]||(t.unread.push(r),t.ids.push(r.message_id),message[r.message_id]=!0)}return t}function Request(){this.request=function(){},this.startHeartbeat=function(){},this.stopHeartbeat=function(){},this.destroy=function(){this.stopHeartbeat()},this.addOrReplaceApi=function(){}}function ajax(e){function t(){}function a(t){if(!t)return"";if("POST"===n&&"json"===e.contentType)return JSON.stringify(t);var a=[];for(var r in t){var i=t[r];"number"==typeof i?a.push(r+"="+i):i&&"object"==typeof i?a.push(r+"="+encodeURIComponent(JSON.stringify(i))):i&&"string"==typeof i&&a.push(r+"="+encodeURIComponent(i))
}return a.join("&")}function r(e){if(e)for(var t in e)e.hasOwnProperty(t)&&h.setRequestHeader(t,e[t]||"")}var n=(e.type||"GET").toUpperCase(),i=e.url,o=e.data,s=e.cancelHeader,c="application/x-www-form-urlencoded",d=e.dataType;"json"===e.contentType&&(c="application/json");var l=e.error||t,u=e.success||t,p=e.complete||t;if(!i)return l(),void p();var f=a(o);"GET"===n&&f&&(i+=-1===i.indexOf("?")?"?"+f:"&"+f);var h=new XMLHttpRequest;h.open(n,i,!0),h.withCredentials=!0,s||(h.setRequestHeader("Content-Type",c),r(e.headers)),h.onreadystatechange=function(){if(4===h.readyState){if(h.status>=200&&h.status<300||304===h.status){var e=h.responseText;
try{"json"===d&&(e=JSON.parse(e)),u(e,h.status,h)}catch(t){l("xhr response catch:"+t)}}else l("xhr status error:"+h.status);p(h,h.status)}},"POST"===n&&f?h.send(f):h.send()}function AjaxRequest(e,t,a){function r(e,r,o){var s=t[e],c=a.getCallback(e);try{s=formatUrl(s,o),ajax({type:n.method||"post",url:s,data:r,dataType:"json",contentType:"json",cancelHeader:n.cancelHeader||!1,success:function(e){c.onResult&&!i&&c.onResult(e)},error:function(e){c.onError&&!i&&c.onError(e)},complete:function(){c.onEnd&&!i&&c.onEnd()
}})}catch(d){}}var n=e||{},i=!1;this.destroy=function(){i=!0},this.addOrReplaceApi=function(e,a){t=t||{},t[e]=a},this.request=r}function formatUrl(e,t){e&&-1===e.indexOf("baiduid=")&&(t=t||{},t.baiduid=webUtil.getQuery("baiduid"));var a=[];if(e&&t){for(var r in t)t.hasOwnProperty(r)&&a.push(r+"="+encodeURIComponent(t[r]));var n=e.indexOf("?")>-1?"&":"?";e+=n,e+=a.join("&")}return e||""}function Daemon(e){var t=Date.now(),a=e.delay||6e4,r=e.callback||function(){},n=!1,i=0;this.start=function(){n||(t=Date.now(),n=!0,i=window.setInterval(function(){var e=Date.now();
if(e-t>a){t=Date.now();try{r()}catch(n){}}},1e3))},this.stop=function(){n=!1,window.clearInterval(i)},this.updateTime=function(){t=Date.now()}}function Callback(e,t){function a(a){if(!t)return null;var r=t[a]||{},n={};return r.onResult&&(n.onResult=function(){r.onResult.apply(e,arguments)}),r.onEnd&&(n.onEnd=function(){r.onEnd.apply(e,arguments)}),r.onError&&(n.onError=function(){r.onError.apply(e,arguments)}),n}function r(){}e=e||this,this.destroy=r,this.getCallback=a}function IImlpSdk(){this.getSsid=function(){},this.getImType=function(){},this.isInit=function(){return!1
},this.isConnect=function(){return!1},this.isConnectting=function(){return!1},this.init=function(){},this.connect=function(){},this.send=function(){},this.leaveWord=function(){},this.disconnect=function(){},this.getHistory=function(){},this.sendUserState=function(){},this.getAsyncCard=function(){},this.on=function(){},this.off=function(){},this.resetFreeTime=function(){},this.getImData=function(){},this.sendUserAction=function(){}}function ImlpSdk(){var e=null,t=null,a=null,r=0;this.setImType=function(e){r=e
},this.getImType=function(){return r},this.setSsid=function(t){e=t},this.getSsid=function(){return e},this.getImData=function(){return{imParam:t,visitParam:a}},this.setImParam=function(e){t=e},this.visitParam=function(e){a=e}}var trackVersion=1,pageQuery=window.pageQuery||{};try{pageQuery.sdkReferrer=pageQuery.sdkReferrer||"",pageQuery.serverXST=pageQuery.serverXST||"",pageQuery.sdkVersion=pageQuery.sdkVersion||0,pageQuery.serverBaiduid=pageQuery.serverBaiduid||"",pageQuery.sdkReferrer=pageQuery.sdkReferrer.replace(/&amp;/g,"&"),pageQuery.sdkReferrer=pageQuery.sdkReferrer.replace("#xst#",pageQuery.serverXST)
}catch(e){}var datatimeout=36e5,paramdatakey="imlp_csdk_paramsdata",trackkey="imlp_csdk_trackkey",isEntry=!1,wsid=getWsid();Base64.prototype.encode=function(e){var t,a,r,n,i,o,s,c="",d=0;for(e=this._utf8_encode(e);d<e.length;)t=e.charCodeAt(d++),a=e.charCodeAt(d++),r=e.charCodeAt(d++),n=t>>2,i=(3&t)<<4|a>>4,o=(15&a)<<2|r>>6,s=63&r,isNaN(a)?o=s=64:isNaN(r)&&(s=64),c=c+this._keyStr.charAt(n)+this._keyStr.charAt(i)+this._keyStr.charAt(o)+this._keyStr.charAt(s);return c},Base64.prototype.decode=function(e){var t,a,r,n,i,o,s,c="",d=0;
for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)n=this._keyStr.indexOf(e.charAt(d++)),i=this._keyStr.indexOf(e.charAt(d++)),o=this._keyStr.indexOf(e.charAt(d++)),s=this._keyStr.indexOf(e.charAt(d++)),t=n<<2|i>>4,a=(15&i)<<4|o>>2,r=(3&o)<<6|s,c+=String.fromCharCode(t),64!==o&&(c+=String.fromCharCode(a)),64!==s&&(c+=String.fromCharCode(r));return c=this._utf8_decode(c)},Base64.prototype._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",a=0;a<e.length;a++){var r=e.charCodeAt(a);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))
}return t},Base64.prototype._utf8_decode=function(e){for(var t="",a=0,r=0,n=0,i=0;a<e.length;)r=e.charCodeAt(a),128>r?(t+=String.fromCharCode(r),a++):r>191&&224>r?(n=e.charCodeAt(a+1),t+=String.fromCharCode((31&r)<<6|63&n),a+=2):(n=e.charCodeAt(a+1),i=e.charCodeAt(a+2),t+=String.fromCharCode((15&r)<<12|(63&n)<<6|63&i),a+=3);return t};var ProxySingleImlpIframe=function(){function e(e){this.init(e)}var t,a,r,n=null,i=null;return e.prototype={init:function(e){var t=this.addIframe(e);i=t.wrapper,n=t.iframe,this.bindEvents(),r="open",a=!0
},postMessageToPage:function(e,t){t.from="track_page",e.postMessage&&e.postMessage(t,"*")},addIframe:function(e){var t=(document.getElementsByTagName("body"),document.createElement("div")),a=e.id||"imlp-iframe-"+(new Date).getTime(),r=e.url;if(r){t.style.cssText="width:100%;height:100%;",t.innerHTML=['<iframe frameborder="0" style="width:100%;height:100%;" scrolling="auto" id=',a,' src="',r,'"></iframe>'].join(""),document.body.appendChild(t);var n=t.querySelector("#"+a);return{wrapper:t,iframe:n}
}},bindEvents:function(){function e(){var e={type:"imlp-popup-loaded"};t.postMessageToPage(window,e),t.postMessageToPage(window.parent,e),setTimeout(function(){t.postMessageToPage(n.contentWindow,e)})}var t=this;n&&(n.onload=e),window.addEventListener("message",function(a){var r=a.data||{};if(sdkUtil.isValidOrigin(a.origin)&&"imlp-popup"===r.from){if("unreadMessage"===r.type)return;if("imlp-popup-loaded"===r.type)return void e();t.postMessageToPage(window.parent,r)}})},hide:function(){i&&(i.style.display="none"),r="hidden"
},open:function(){i&&(i.style.display="block"),r="open"},destory:function(){i&&document.body.removeChild(i),i=null,n=null,a=!1,r=null,t=null},isInit:function(){return a},getVisiblity:function(){return r},getIframe:function(){return n}},function(a){return t||(t=new e(a)),t}}(),sdkUtil={getChromeVersion:function(){for(var e=navigator.userAgent.split(" "),t="",a=e.length,r=0;a>r;r++)/chrome/i.test(e[r])&&(t=e[r]);return t?Number(t.split("/")[1].split(".")[0]):0},getUrlHash:function(){var e=new RegExp("(^|&)"+name+"=([^&]*)(&|$)","i"),t=window.location.hash.substr(1).match(e);
return null!=t?unescape(t[2]):null},getUrlHash:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),a=window.location.hash.substr(1).match(t);return null!=a?unescape(a[2]):null},isPrerenderPage:function(){var e=["prerender","jmy_prerender"],t=e.length,a=navigator&&navigator.userAgent||"",r=a.indexOf("baiduboxapp")>-1,n=a.indexOf("light")>-1,i=!1,o=!1;try{o=MIP&&MIP.prerender&&MIP.prerender.getPrerenderState()&&MIP.prerender.getPrerenderState().prerendering}catch(s){o=!1}if(r&&n)if(o)i=!0;else for(var c=0;t>c;c++){var d=e[c];
if("1"===sdkUtil.getUrlHash(d)){i=!0;break}}else i=!1;return i},isValidOrigin:function(e){for(var t=["baidu.com","wejianzhan.com"],a=t.length,r=0;a>r;r++)if(e&&e.indexOf(t[r])>-1)return!0;return!1},cookieEnabled:function(){var e=!0;try{e=!!window.document.cookie}catch(t){e=!1}return e}},userList=[],appidlist=[],fetchDataObj=null,entrySiteObj=null,imlpIframeInstance=null,useLocalStorage=!1,domain=getDomain(),topIsImlp=isImlp(root.top),useLocalBrowser={ios:{},android:{sogou:!0}},browser=getBrowser(navigator.userAgent);
useLocalBrowser[browser.os]&&useLocalBrowser[browser.os][browser.browser]&&(useLocalStorage=!0),pageQuery.serverXST&&(removeParamData(["openImUrl"]),saveParamData("xst",pageQuery.serverXST)),!pageQuery.sdkVersion&&pageQuery.serverXST?removeParamData(["openImUrl"]):!pageQuery.sdkVersion||pageQuery.sdkReferrer&&!isChargeLink(pageQuery.sdkReferrer)&&isSameDomain(pageQuery.sdkReferrer,document.referrer)||removeParamData(["openImUrl"]);var entryData=null,baseApi={entrySite:"/imlp/track/start",fetch:"/imlp/heartbeat"};
bindCloseBtnEvent(),ImlpSdk.prototype=new IImlpSdk,ImlpSdk.prototype.constructor=IImlpSdk;var imlpSdk=new ImlpSdk,message={},callbacks={entrySite:{onResult:function(e){if(e){var t=e.autoInvite,a=e.feature||{};t&&(log({type:"invite_auto",from:"sdk",content:"",abTest:a.abTest||"",pvKey:a.pvKey||""}),postMessage({type:"invite",data:{inviteName:"inviteMessage",inviteType:"auto",data:t,abTest:a.abTest}}))}}},fetch:{onResult:function(e){if(e){var t=e.talk||{},a=e.invite||{},r=e.feature||{},n=getData(paramdatakey,!0)||{},i=n.xst&&n.xst.data||"";
if(a.content=a.content||[],a.content&&"[object Array]"===Object.prototype.toString.call(a.content)&&a.content.length>0&&(log({type:"invite_manual",from:"sdk",content:{level1:a.level1,level2:a.level2,level3:a.level3},im_type:a.imType,abTest:r.abTest||"",pvKey:r.pvKey||"",wsid:wsid,xst:i}),a.content.map(function(e){postMessage({type:"invite",data:{inviteName:"inviteMessage",inviteType:"manual",data:{content:e,imType:a.imType,level1:a.level1,level2:a.level2,level3:a.level3},abTest:r.abTest}})})),t.unread){var o=newcomerUnread(t.message),s=r.abTest;
s=s.indexOf(":")>-1?s.split(":")[0]:s;var c=r.disables||[];c.indexOf(s)>0&&log({type:"unread",from:"sdk",content:o.ids,abTest:r.abTest||"",pvKey:r.pvKey||"",wsid:wsid,xst:i}),postMessage({type:"event",data:{eventName:"unreadMessage",data:{count:t.unread,unread:o.unread,abTest:r.abTest}}})}}}}},callbackmodel=new Callback(this,callbacks);root.addEventListener("message",function(e){var t=e.data;if(sdkUtil.isValidOrigin(e.origin)&&t&&("track_page"===t.from||"sdk"===t.from||"imlp-popup"===t.from)){var a=t.data;
if("save_track"===t.type)saveTrackData(a);else if("save_data"===t.type)saveParamData(a.type,a.data,a.timestamp);else if("popupImlpIframe"===t.type)stopHeartBeat(),popupImlp(a);else if("entry_site"===t.type)entryData=entrySite(a);else if("set_params"===t.type);else if("remove_params"===t.type){var r=a;removeParamData(r)}else"imlp-popup-hide"===t.type?postMessage({type:"imlp-popup-hide",data:{}}):"imlp-popup-close"===t.type?destoryImlpPopup():"unreadMessage"===t.type?postMessage({type:"event",data:{eventName:"unreadMessage",data:a}}):"imlp-popup-loaded"===t.type?document.body.classList.remove("layout-loading"):"visibilityChange"===t.type&&(t.from="sdk")?handleVisibilityChange(t.data):"stopheartbeat"===t.type&&stopHeartBeat()
}}),!function(){"use strict";function Md5(e){if(e)blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks,this.buffer8=buffer8;else if(ARRAY_BUFFER){var t=new ArrayBuffer(68);this.buffer8=new Uint8Array(t),this.blocks=new Uint32Array(t)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0
}var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_MD5_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_MD5_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_MD5_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD="function"==typeof define&&define.amd,ARRAY_BUFFER=!root.JS_MD5_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,HEX_CHARS="0123456789abcdef".split(""),EXTRA=[128,32768,8388608,-2147483648],SHIFT=[0,8,16,24],OUTPUT_TYPES=["hex","array","digest","buffer","arrayBuffer","base64"],BASE64_ENCODE_CHAR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),blocks=[],buffer8;
if(ARRAY_BUFFER){var buffer=new ArrayBuffer(68);buffer8=new Uint8Array(buffer),blocks=new Uint32Array(buffer)}(root.JS_MD5_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!ARRAY_BUFFER||!root.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});var createOutputMethod=function(e){return function(t){return new Md5(!0).update(t)[e]()
}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Md5},e.update=function(t){return e.create().update(t)};for(var t=0;t<OUTPUT_TYPES.length;++t){var a=OUTPUT_TYPES[t];e[a]=createOutputMethod(a)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("md5").update(e,"utf8").digest("hex");if(null===e||void 0===e)throw ERROR;
return e.constructor===ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||ArrayBuffer.isView(e)||e.constructor===Buffer?crypto.createHash("md5").update(new Buffer(e)).digest("hex"):method(e)};return nodeMethod};Md5.prototype.update=function(e){if(!this.finalized){var t,a=typeof e;if("string"!==a){if("object"!==a)throw ERROR;if(null===e)throw ERROR;if(ARRAY_BUFFER&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||ARRAY_BUFFER&&ArrayBuffer.isView(e)))throw ERROR;t=!0}for(var r,n,i=0,o=e.length,s=this.blocks,c=this.buffer8;o>i;){if(this.hashed&&(this.hashed=!1,s[0]=s[16],s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)if(ARRAY_BUFFER)for(n=this.start;o>i&&64>n;++i)c[n++]=e[i];
else for(n=this.start;o>i&&64>n;++i)s[n>>2]|=e[i]<<SHIFT[3&n++];else if(ARRAY_BUFFER)for(n=this.start;o>i&&64>n;++i)r=e.charCodeAt(i),128>r?c[n++]=r:2048>r?(c[n++]=192|r>>6,c[n++]=128|63&r):55296>r||r>=57344?(c[n++]=224|r>>12,c[n++]=128|r>>6&63,c[n++]=128|63&r):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++i)),c[n++]=240|r>>18,c[n++]=128|r>>12&63,c[n++]=128|r>>6&63,c[n++]=128|63&r);else for(n=this.start;o>i&&64>n;++i)r=e.charCodeAt(i),128>r?s[n>>2]|=r<<SHIFT[3&n++]:2048>r?(s[n>>2]|=(192|r>>6)<<SHIFT[3&n++],s[n>>2]|=(128|63&r)<<SHIFT[3&n++]):55296>r||r>=57344?(s[n>>2]|=(224|r>>12)<<SHIFT[3&n++],s[n>>2]|=(128|r>>6&63)<<SHIFT[3&n++],s[n>>2]|=(128|63&r)<<SHIFT[3&n++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++i)),s[n>>2]|=(240|r>>18)<<SHIFT[3&n++],s[n>>2]|=(128|r>>12&63)<<SHIFT[3&n++],s[n>>2]|=(128|r>>6&63)<<SHIFT[3&n++],s[n>>2]|=(128|63&r)<<SHIFT[3&n++]);
this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Md5.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[t>>2]|=EXTRA[3&t],t>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()
}},Md5.prototype.hash=function(){var e,t,a,r,n,i,o=this.blocks;this.first?(e=o[0]-680876937,e=(e<<7|e>>>25)-271733879<<0,r=(-1732584194^2004318071&e)+o[1]-117830708,r=(r<<12|r>>>20)+e<<0,a=(-271733879^r&(-271733879^e))+o[2]-1126478375,a=(a<<17|a>>>15)+r<<0,t=(e^a&(r^e))+o[3]-1316259209,t=(t<<22|t>>>10)+a<<0):(e=this.h0,t=this.h1,a=this.h2,r=this.h3,e+=(r^t&(a^r))+o[0]-680876936,e=(e<<7|e>>>25)+t<<0,r+=(a^e&(t^a))+o[1]-389564586,r=(r<<12|r>>>20)+e<<0,a+=(t^r&(e^t))+o[2]+606105819,a=(a<<17|a>>>15)+r<<0,t+=(e^a&(r^e))+o[3]-1044525330,t=(t<<22|t>>>10)+a<<0),e+=(r^t&(a^r))+o[4]-176418897,e=(e<<7|e>>>25)+t<<0,r+=(a^e&(t^a))+o[5]+1200080426,r=(r<<12|r>>>20)+e<<0,a+=(t^r&(e^t))+o[6]-1473231341,a=(a<<17|a>>>15)+r<<0,t+=(e^a&(r^e))+o[7]-45705983,t=(t<<22|t>>>10)+a<<0,e+=(r^t&(a^r))+o[8]+1770035416,e=(e<<7|e>>>25)+t<<0,r+=(a^e&(t^a))+o[9]-1958414417,r=(r<<12|r>>>20)+e<<0,a+=(t^r&(e^t))+o[10]-42063,a=(a<<17|a>>>15)+r<<0,t+=(e^a&(r^e))+o[11]-1990404162,t=(t<<22|t>>>10)+a<<0,e+=(r^t&(a^r))+o[12]+1804603682,e=(e<<7|e>>>25)+t<<0,r+=(a^e&(t^a))+o[13]-40341101,r=(r<<12|r>>>20)+e<<0,a+=(t^r&(e^t))+o[14]-1502002290,a=(a<<17|a>>>15)+r<<0,t+=(e^a&(r^e))+o[15]+1236535329,t=(t<<22|t>>>10)+a<<0,e+=(a^r&(t^a))+o[1]-165796510,e=(e<<5|e>>>27)+t<<0,r+=(t^a&(e^t))+o[6]-1069501632,r=(r<<9|r>>>23)+e<<0,a+=(e^t&(r^e))+o[11]+643717713,a=(a<<14|a>>>18)+r<<0,t+=(r^e&(a^r))+o[0]-373897302,t=(t<<20|t>>>12)+a<<0,e+=(a^r&(t^a))+o[5]-701558691,e=(e<<5|e>>>27)+t<<0,r+=(t^a&(e^t))+o[10]+38016083,r=(r<<9|r>>>23)+e<<0,a+=(e^t&(r^e))+o[15]-660478335,a=(a<<14|a>>>18)+r<<0,t+=(r^e&(a^r))+o[4]-405537848,t=(t<<20|t>>>12)+a<<0,e+=(a^r&(t^a))+o[9]+568446438,e=(e<<5|e>>>27)+t<<0,r+=(t^a&(e^t))+o[14]-1019803690,r=(r<<9|r>>>23)+e<<0,a+=(e^t&(r^e))+o[3]-187363961,a=(a<<14|a>>>18)+r<<0,t+=(r^e&(a^r))+o[8]+1163531501,t=(t<<20|t>>>12)+a<<0,e+=(a^r&(t^a))+o[13]-1444681467,e=(e<<5|e>>>27)+t<<0,r+=(t^a&(e^t))+o[2]-51403784,r=(r<<9|r>>>23)+e<<0,a+=(e^t&(r^e))+o[7]+1735328473,a=(a<<14|a>>>18)+r<<0,t+=(r^e&(a^r))+o[12]-1926607734,t=(t<<20|t>>>12)+a<<0,n=t^a,e+=(n^r)+o[5]-378558,e=(e<<4|e>>>28)+t<<0,r+=(n^e)+o[8]-2022574463,r=(r<<11|r>>>21)+e<<0,i=r^e,a+=(i^t)+o[11]+1839030562,a=(a<<16|a>>>16)+r<<0,t+=(i^a)+o[14]-35309556,t=(t<<23|t>>>9)+a<<0,n=t^a,e+=(n^r)+o[1]-1530992060,e=(e<<4|e>>>28)+t<<0,r+=(n^e)+o[4]+1272893353,r=(r<<11|r>>>21)+e<<0,i=r^e,a+=(i^t)+o[7]-155497632,a=(a<<16|a>>>16)+r<<0,t+=(i^a)+o[10]-1094730640,t=(t<<23|t>>>9)+a<<0,n=t^a,e+=(n^r)+o[13]+681279174,e=(e<<4|e>>>28)+t<<0,r+=(n^e)+o[0]-358537222,r=(r<<11|r>>>21)+e<<0,i=r^e,a+=(i^t)+o[3]-722521979,a=(a<<16|a>>>16)+r<<0,t+=(i^a)+o[6]+76029189,t=(t<<23|t>>>9)+a<<0,n=t^a,e+=(n^r)+o[9]-640364487,e=(e<<4|e>>>28)+t<<0,r+=(n^e)+o[12]-421815835,r=(r<<11|r>>>21)+e<<0,i=r^e,a+=(i^t)+o[15]+530742520,a=(a<<16|a>>>16)+r<<0,t+=(i^a)+o[2]-995338651,t=(t<<23|t>>>9)+a<<0,e+=(a^(t|~r))+o[0]-198630844,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~a))+o[7]+1126891415,r=(r<<10|r>>>22)+e<<0,a+=(e^(r|~t))+o[14]-1416354905,a=(a<<15|a>>>17)+r<<0,t+=(r^(a|~e))+o[5]-57434055,t=(t<<21|t>>>11)+a<<0,e+=(a^(t|~r))+o[12]+1700485571,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~a))+o[3]-1894986606,r=(r<<10|r>>>22)+e<<0,a+=(e^(r|~t))+o[10]-1051523,a=(a<<15|a>>>17)+r<<0,t+=(r^(a|~e))+o[1]-2054922799,t=(t<<21|t>>>11)+a<<0,e+=(a^(t|~r))+o[8]+1873313359,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~a))+o[15]-30611744,r=(r<<10|r>>>22)+e<<0,a+=(e^(r|~t))+o[6]-1560198380,a=(a<<15|a>>>17)+r<<0,t+=(r^(a|~e))+o[13]+1309151649,t=(t<<21|t>>>11)+a<<0,e+=(a^(t|~r))+o[4]-145523070,e=(e<<6|e>>>26)+t<<0,r+=(t^(e|~a))+o[11]-1120210379,r=(r<<10|r>>>22)+e<<0,a+=(e^(r|~t))+o[2]+718787259,a=(a<<15|a>>>17)+r<<0,t+=(r^(a|~e))+o[9]-343485551,t=(t<<21|t>>>11)+a<<0,this.first?(this.h0=e+1732584193<<0,this.h1=t-271733879<<0,this.h2=a-1732584194<<0,this.h3=r+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+t<<0,this.h2=this.h2+a<<0,this.h3=this.h3+r<<0)
},Md5.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,a=this.h2,r=this.h3;return HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]
},Md5.prototype.toString=Md5.prototype.hex,Md5.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,a=this.h2,r=this.h3;return[255&e,e>>8&255,e>>16&255,e>>24&255,255&t,t>>8&255,t>>16&255,t>>24&255,255&a,a>>8&255,a>>16&255,a>>24&255,255&r,r>>8&255,r>>16&255,r>>24&255]},Md5.prototype.array=Md5.prototype.digest,Md5.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),t=new Uint32Array(e);return t[0]=this.h0,t[1]=this.h1,t[2]=this.h2,t[3]=this.h3,e},Md5.prototype.buffer=Md5.prototype.arrayBuffer,Md5.prototype.base64=function(){for(var e,t,a,r="",n=this.array(),i=0;15>i;)e=n[i++],t=n[i++],a=n[i++],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[63&(e<<4|t>>>4)]+BASE64_ENCODE_CHAR[63&(t<<2|a>>>6)]+BASE64_ENCODE_CHAR[63&a];
return e=n[i],r+=BASE64_ENCODE_CHAR[e>>>2]+BASE64_ENCODE_CHAR[e<<4&63]+"=="};var exports=createMethod();COMMON_JS?module.exports=exports:(root.md5=exports,AMD&&define(function(){return exports}))}(),function(){"use strict";function e(){var e="",t=m();D.version="1.2",D.display.screen=d(),D.display.availScreen=l(),D.display.colorDepth=window.screen.colorDepth||-1,D.display.dpr=window.devicePixelRatio||-1,D.browser.adBlock=document.getElementById("ads")?0:1,D.browser.cookieEnable=u()?1:0,D.browser.dnt=b()?1:0,D.browser.plugins=C(),D.browser.indexedDB=g()?1:0,D.browser.localStorage=t.support?1:0,D.browser.localStorageEnable=t.enable?1:0,D.browser.sessionStorage=v()?1:0,D.browser.userData=y()?1:0,D.browser.ua=window.navigator&&window.navigator.userAgent||"",D.os.cpuLevel=S(),D.os.timezone=(new Date).getTimezoneOffset(),D.os.lang=window.navigator.language,D.os.langs=window.navigator.languages,D.os.fonts=A(),D.os.dataFormat=f(),D.os.tangent=p(),D.os.softs=_(),D.hd.concurrency=w(),D.hd.touchPoint=h()[0],D.hd.webglVerdor=R(),D.hd.touchRender=I(),D.hd.plat=k(),D.canvas=E(),D.iuid=c();
try{e=JSON.stringify(D)}catch(a){e=""}return e}var t="object"==typeof window,a=t?window:{},r=!t&&"object"==typeof self,n="object"==typeof process&&process.versions&&process.versions.node;n?a=global:r&&(a=self);var i=!a.JS_MD5_NO_COMMON_JS&&"object"==typeof module&&module.exports,o="function"==typeof define&&define.amd,s=document.referrer&&-1==document.referrer.indexOf("1013843"),c=function(e){var t="iuid",a="";return localStorage&&localStorage.setItem&&(e?localStorage.setItem(t,e):a=localStorage.getItem(t)||a),a
},d=function(){if(window.screen.width>window.screen.height)var e=[window.screen.width,window.screen.height];else var e=[window.screen.height,window.screen.width];return(e||[]).join("*")},l=function(){if(window.screen.availWidth>window.screen.availHeight)var e=[window.screen.availWidth,window.screen.availHeight];else var e=[window.screen.availHeight,window.screen.availWidth];return(e||[]).join("*")},u=function(){var e=window.navigator.cookieEnabled;return e||(document.cookie="fpCookie",e=-1!=document.cookie.indexOf("fpCookie")),e
},p=function(){return Math.tan(-1e300)},f=function(){var e=new Date;return e.setTime(0),e.toLocaleString()},h=function(){var e=0,t=!1;"undefined"!=typeof window.navigator.maxTouchPoints?e=window.navigator.maxTouchPoints:"undefined"!=typeof window.navigator.msMaxTouchPoints&&(e=window.navigator.msMaxTouchPoints);try{document.createEvent("TouchEvent"),t=!0}catch(a){}var r="ontouchstart"in window;return[e,t,r]},m=function(){var e="storage-test",t="XzFGTaclcWmkQWD1Pi3kPWb8P1bBQaFsmgP1pyfBrBcBQaFWIy-bcWCBcBsBIaclnHRLPHbvn103njTdPisBIiclchndn1RdnjfdP1P9mH-hPWRvPvwhnjw-PhFBnjRkP2syzBsBTaclcndzxj-WryRduHn1nhmkuAFBrjDdnjNWujT1ryuBuWPhcMYvm1wBPHTLm1T3uH9-myDvnWuBn1K-PHK-P1-bnyD1u0",a={support:!1,enable:!1};
try{localStorage.removeItem(e),localStorage.setItem(e,t),a.support=!0,a.enable=localStorage.getItem&&localStorage.getItem(e)===t,localStorage.removeItem(e)}catch(r){}return a},v=function(){var e="nice_item";try{return sessionStorage.setItem(e,e),sessionStorage.removeItem(e),!0}catch(t){return!1}},y=function(){return!!document.createElement("div").addBehavior},g=function(){try{return!!window.indexedDB}catch(e){return!0}},b=function(){return window.navigator.doNotTrack||window.navigator.msDoNotTrack||window.doNotTrack||void 0
},w=function(){return window.navigator.hardwareConcurrency},S=function(){return window.navigator.cpuClass||-1},k=function(){return window.navigator.platform},C=function(){var e=[];if(window.navigator.plugins)for(var t=0;t<window.navigator.plugins.length;t++){var a=window.navigator.plugins[t];a&&e.push(a.name)}return e},R=function(){try{var e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return t.getParameter(t.getExtension("WEBGL_debug_renderer_info").UNMASKED_VENDOR_WEBGL)
}catch(a){return-1}},I=function(){try{var e=document.createElement("canvas"),t=e.getContext("webgl")||e.getContext("experimental-webgl");return t.getParameter(t.getExtension("WEBGL_debug_renderer_info").UNMASKED_RENDERER_WEBGL)}catch(a){return-1}},A=function(){var e=["Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Garamond","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Ubuntu","Verdana","Wingdings","Wingdings 2","Wingdings 3"],t=["monospace","sans-serif","serif"],a="mmmmmmmmmmlli",r="72px",n=document.getElementsByTagName("body")[0],i=document.createElement("span");
i.style.position="absolute",i.style.left="-9999px",i.style.lineHeight="normal",i.style.fontStyle="normal",i.style.fontWeight="normal",i.style.letterSpacing="normal",i.style.lineBreak="auto",i.style.lineHeight="normal",i.style.texTransform="none",i.style.textAlign="left",i.style.textDecoration="none",i.style.textShadow="none",i.style.whiteSpace="normal",i.style.wordBreak="normal",i.style.wordSpacing="normal",i.style.fontSize=r,i.innerHTML=a;for(var o={},s={},c=0,d=t.length;d>c;c++)i.style.fontFamily=t[c],n.appendChild(i),o[t[c]]=i.offsetWidth,s[t[c]]=i.offsetHeight,n.removeChild(i);
for(var l=function(e){for(var a=!1,r=0,c=t.length;c>r;r++){i.style.fontFamily=e+","+t[r],n.appendChild(i);var d=i.offsetWidth!==o[t[r]]||i.offsetHeight!==s[t[r]];n.removeChild(i),a=a||d}return a},u="",p=0,f=e.length;f>p;p++)l(e[p])&&(u+=e[p],u+=";");return u},H=document.createElement("canvas"),E=function(){var e=[];H.width=2e3,H.height=200,H.style.display="inline";var t=H.getContext("2d");return t.rect(0,0,10,10),t.rect(2,2,6,6),e.push("canvas winding:"+(t.isPointInPath(5,5,"evenodd")===!1?"yes":"no")),t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.font="13pt no-real-font-123",t.fillText("Sphinx of black quartz, judge my vow 🐼😄",2,20),t.fillStyle="rgba(102, 204, 0, 0.23456789)",t.font="18pt Arial",t.fillText("Sphinx of black quartz, judge my vow 🐼😄",4,22),t.globalCompositeOperation="multiply",t.fillStyle="rgb(255,0,255)",t.beginPath(),t.arc(50.123456789,50,50,0,2*Math.PI,!0),t.closePath(),t.fill(),t.fillStyle="rgb(0,255,255)",t.beginPath(),t.arc(100,50.456,50,0,2*Math.PI,!0),t.closePath(),t.fill(),t.fillStyle="rgb(255,125,0)",t.beginPath(),t.arc(75,100,50.789,0,2*Math.PI,!0),t.closePath(),t.fill(),t.fillStyle="rgb(125,0,255)",t.arc(75,75,75,0,2*Math.PI,!0),t.shadowBlur=10,t.shadowColor="blue",t.arc(75,75,25,0,2*Math.PI,!0),t.fill("evenodd"),H.toDataURL&&e.push("canvas fp:"+H.toDataURL()),window.canvasThing=H,md5(e.join("~"))
},_=function(){var e=window;try{return[e[atob("cHJvcGVydHlJc0VudW1lcmFibGU")](atob("b3V0cHV0TXNn"))?1:0,e[atob("cHJvcGVydHlJc0VudW1lcmFibGU")](atob("V2ViVmlldw=="))?1:0,e[atob("cHJvcGVydHlJc0VudW1lcmFibGU")](atob("ZXhlU2VhcmNoQW5kQ2xpY2s="))?1:0,e[atob("cHJvcGVydHlJc0VudW1lcmFibGU")](atob("Q2VmU2hhcnA="))?1:0,e[atob("Y2VmU2hhcnA=")]?1:0,s&&e[atob("cHJvcGVydHlJc0VudW1lcmFibGU")](atob("ZG9faGl0"))?1:0,window[atob("bmF2aWdhdG9y")][atob("d2ViZHJpdmVy")]?1:0,e[atob("cHJvcGVydHlJc0VudW1lcmFibGU")](atob("V2ViU2Rr"))&&e[atob("cHJvcGVydHlJc0VudW1lcmFibGU")](atob("T3V0U2Rr"))?1:0,window[atob("cHJvcGVydHlJc0VudW1lcmFibGU")](atob("Y2FsbFBoYW50b20="))||window[atob("cHJvcGVydHlJc0VudW1lcmFibGU")](atob("X3BoYW50b20="))||window[atob("cHJvcGVydHlJc0VudW1lcmFibGU")](atob("cGhhbnRvbQ=="))?-1:0,window[atob("cHJvcGVydHlJc0VudW1lcmFibGU=")](atob("ZXhlU2VhcmNoQW5kQ2xpY2s="))||window[atob("cHJvcGVydHlJc0VudW1lcmFibGU=")](atob("V2ViU2Rr"))&&window[atob("cHJvcGVydHlJc0VudW1lcmFibGU=")](atob("T3V0U2Rr"))||window[atob("cHJvcGVydHlJc0VudW1lcmFibGU=")](atob("U3RhdGVNYW5hZ2Vy"))?1:0]
}catch(t){return[0,0,0,0,0,0,0,0,0]}},D={display:{},browser:{},os:{},hd:{}},T=e;i?module.exports=T:(a.getFp=T,o&&define(function(){return T}))}();var imlpFp=null,storage=null;useLocalStorage&&(storage="local"),sendParamData();var popupEnabled=getTrackParam("bdid")?!0:sdkUtil.cookieEnabled();postMessage({type:"load",data:{key:"{{data}}",storage:storage,topIsImlp:topIsImlp,popupEnabled:popupEnabled}});var webUtil={getQuery:function(e){try{for(var t=window.location.search.substring(1),a=t.split("&"),r=0;r<a.length;r++){var n=a[r].split("=");
if(n[0]===e)return decodeURIComponent(n[1])}}catch(i){}return""}};AjaxRequest.prototype=new Request,AjaxRequest.prototype.constructor=AjaxRequest}(this);